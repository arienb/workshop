<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Welcome</title>
  <script src="https://cdn.jsdelivr.net/npm/keycloak-js@20.0.3/dist/keycloak.min.js"></script>
</head>
<body>
  <h1>Welkom</h1>
  <div id="userinfo">‚è≥ Laden profiel...</div>
  <button id="logoutBtn">Logout</button>

  <script>
    const keycloak = new Keycloak({
      url: 'http://127.0.0.1:8080',
      realm: 'workshop',
      clientId: 'frontend-demo'
    });

    keycloak.init({ onLoad: 'check-sso', pkceMethod: 'S256' })
    .then(authenticated => {
        if(authenticated) {
        keycloak.loadUserProfile().then(profile => {
            document.getElementById('userinfo').textContent =
            `Welkom ${profile.firstName} ${profile.lastName} (${profile.username})`;
        });
        } else {
        document.getElementById('userinfo').textContent = 'Niet ingelogd';
        // Optioneel redirect terug naar loginpagina
        window.location.href = 'index.html';
        }
    });

    document.getElementById('logoutBtn').addEventListener('click', () => {
      keycloak.logout({ redirectUri: 'http://127.0.0.1:5500/frontend/index.html' });
    });
  </script>
</body>
</html>