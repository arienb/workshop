<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login</title>
  <script src="https://cdn.jsdelivr.net/npm/keycloak-js@20.0.3/dist/keycloak.min.js"></script>
</head>
<body>
  <h1>Login pagina</h1>
  <button id="loginBtn">Login</button>

  <script>
    const keycloak = new Keycloak({
      url: 'http://127.0.0.1:8080',
      realm: 'workshop',
      clientId: 'frontend-demo'
    });

    document.getElementById('loginBtn').addEventListener('click', () => {
      keycloak.init({
        onLoad: 'login-required', 
        pkceMethod: 'S256', 
        redirectUri: 'http://127.0.0.1:5500/frontend/welcome.html'
      }).then(authenticated => {
        if(authenticated) {
          console.log('Authenticated, redirecting...');
        }
      }).catch(err => console.error('Login failed', err));
    });
  </script>
</body>
</html>